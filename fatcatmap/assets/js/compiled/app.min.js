(function() {function f(){return"#js-context".querySelector?"#js-context":document.getElementById("#js-context".slice(1));throw new TypeError("Invalid document query string.");};var h={c:navigator.cookieEnabled,g:2==window.devicePixelRatio,m:!!window.Worker,h:!!window.SharedWorker,i:!!window.WebSocket,j:!!window.a,d:!!navigator.geolocation,l:0<navigator.a,history:{e:!!window.history.pushState,hash:!!window.onhashchange},storage:{local:!!window.localStorage,session:!!window.sessionStorage,f:!!window.IDBFactory}};function k(b,c){var d=!0;-1===b.indexOf("?")&&(b+="?",d=!1);for(var e in c)c.hasOwnProperty(e)&&(!0===d?b+="&":d=!0,b+=encodeURIComponent(e)+"="+encodeURIComponent(c[e]));return b}function m(b){var c=Array.prototype.slice.call(arguments),d=c.shift(),e=[];if(!c.length)return d;"/"===d.charAt(d.length-1)&&(d=d.slice(0,-1));for(e.push(d);c.length;)if(d=c.shift())"/"===d.charAt(0)&&(d=d.slice(1)),"/"===d.charAt(d.length-1)&&(d=d.slice(0,-1)),e.push(d);return e.join("/")};var n={},p,q,r,s;p=/^([^:]+):\s*/;q=function(b,c,d){var e=new XMLHttpRequest,g;c.b?g=k(c.url,c.b):"string"!==typeof c?g=c.url:g=c;e.open(b.toUpperCase(),g,!!d);if(c.headers){b=c.headers;for(var l in b)b.hasOwnProperty(l)&&e.setRequestHeader(l,b[l])}e.data=c.data;d?(e.onerror=d.error,e.onloadend=function(){e.responseJSON=s(e);d.k(e.responseJSON)}):(e.onerror=function(b){e.error=b},e.onloadend=function(){e.responseJSON=s(e)});return e};
r=function(b,c,d){var e="object"===typeof c.data?JSON.stringify(c.data):"string"===typeof c.data?c.data:null==c.data?null:""+c.data;c=q(b,c,d);c.send(e);return c};s=function(b){var c={},d=b.getAllResponseHeaders().split("\n");try{c.data=JSON.parse(b.responseText)}catch(e){c.data=b.responseText||""}c.headers={};for(var g=0;g<d.length;g++)d[g]&&(b=d[g].split(p),c.headers[b[1]]=b[2]);return c};
n.http={get:function(b,c){return r("GET",b,c)},delete:function(b,c){return r("DELETE",b,c)},head:function(b,c){return r("HEAD",b,c)},post:function(b,c){return r("POST",b,c)},put:function(b,c){return r("PUT",b,c)},patch:function(b,c){return r("PATCH",b,c)},options:function(b,c){return r("OPTIONS",b,c)}};var t;t=function(b,c,d){var e=this;e.name=b;e.a=d;c.forEach(function(b){var c=m("/_rpc/v1/",e.name+"."+b);e[b]=function(b,e){var d={url:c,headers:b.headers||{},data:b};d.headers.Accept="application/json";d.headers["Content-Type"]="application/json";return n.http.post(d,e)}})};n.rpc={factory:function(b){var c=b[0];n.rpc[c]=new t(c,b[1],b[2]);return n.rpc},init:function(b){b.forEach(n.rpc.factory)}};var u;u=function(){var b=/^[0-9]+$/,c,d;c=function(b){return"string"===typeof b?b:null==b?"":"object"===typeof b?JSON.stringify(b):String(b)};d=function(c){var d=c.charAt(0);return"{"===d||"["===d?JSON.parse(c):c?"true"===c||"false"===c?Boolean(c):b.test(c)?+c:c:null};return function(b){this.get=function(c){return d(b.getItem(c))};this.put=function(d,l){b.setItem(d,c(l))}}}();n.storage={};n.storage.local=h.storage.local?new u(window.localStorage):null;
n.storage.session=h.storage.session?new u(window.sessionStorage):null;function v(){}v.prototype=n;function w(b){return function(){return b.apply(new v,arguments)}}Object.defineProperty(Object.prototype,"service",{value:function(b){var c;if(!b||"string"!==typeof b)throw new TypeError("service() requires a string name.");if(this.constructor!==Object)throw Error("service() can only be invoked on native objects.");for(var d in this)this.hasOwnProperty(d)&&(c=this[d],c instanceof Function&&(this[d]=w(c)));v.prototype[b]=this;return v.prototype[b]}});n.data={};v.prototype.data=w({normalize:function(){}});n.a={};v.prototype.graph=w({init:function(b){return this.a.construct(this.data.normalize(b))},construct:function(){}});window.catnip_beta=w(function(){var b=JSON.parse(f().textContent);b.services&&this.rpc.init(b.services);this.session=b.session&&b.session.established?b.session.payload:{};return this})();})();
