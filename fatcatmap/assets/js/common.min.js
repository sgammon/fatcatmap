var frame,image_prefix,load_context,map,mapper,onloads,receive,stage,_get,_onload,__slice=[].slice;_get=function $_get$($d$$){return document.getElementById($d$$)};stage=this.stage=_get("appstage");map=this.map=_get("map");mapper=this.mapper=_get("mapper");frame=this.frame=_get("appframe");image_prefix=this.image_prefix="//deliver.fcm-static.org/image-proxy/providence-clarity/warehouse/raw/govtrack/photos/";onloads=this.__onload_callbacks=[];
receive=this.receive=function $this$receive$($data$$){var $graph$$,$index$$,$_j_key$$,$_key_iter_key_i_native_suboffset$$,$_i_native_i_target_k$$,$payload$$,$_len__len1__ref1__ref2_targets$$,$_k__ref$$,$_len2$$;$payload$$="string"===typeof $data$$?this.payload=JSON.parse($data$$):this.payload=$data$$;$data$$=this.data={};$index$$=this.index={nodes_by_key:{},edges_by_key:{},natives_by_key:{},object_natives:{}};$graph$$=this.graph={nodes:[],edges:[],natives:[]};$_k__ref$$=$payload$$.data.keys;$_key_iter_key_i_native_suboffset$$=
$_i_native_i_target_k$$=0;for($_len__len1__ref1__ref2_targets$$=$_k__ref$$.length;$_i_native_i_target_k$$<$_len__len1__ref1__ref2_targets$$;$_key_iter_key_i_native_suboffset$$=++$_i_native_i_target_k$$)$_j_key$$=$_k__ref$$[$_key_iter_key_i_native_suboffset$$],$data$$[$_j_key$$]=$payload$$.data.objects[$_key_iter_key_i_native_suboffset$$];$_len__len1__ref1__ref2_targets$$=Array($payload$$.graph.natives);$_key_iter_key_i_native_suboffset$$=$_j_key$$=0;for($_len__len1__ref1__ref2_targets$$=$_len__len1__ref1__ref2_targets$$.length;$_j_key$$<
$_len__len1__ref1__ref2_targets$$;$_key_iter_key_i_native_suboffset$$=++$_j_key$$)$_i_native_i_target_k$$=$payload$$.graph.edges+1+$_key_iter_key_i_native_suboffset$$,$_i_native_i_target_k$$=$index$$.natives_by_key[$payload$$.data.keys[$_i_native_i_target_k$$]]=$graph$$.natives.push({key:$payload$$.data.keys[$_i_native_i_target_k$$],data:$data$$[$payload$$.data.keys[$_i_native_i_target_k$$]]})-1;for($_key_iter_key_i_native_suboffset$$=-1;$_key_iter_key_i_native_suboffset$$<$payload$$.data.keys.length;)if($_key_iter_key_i_native_suboffset$$++,
$_key_iter_key_i_native_suboffset$$<=$payload$$.graph.nodes)$_i_native_i_target_k$$=$index$$.nodes_by_key[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]=$graph$$.nodes.push({node:{key:$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$],data:$data$$[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]},"native":$graph$$.natives[$index$$.natives_by_key[$data$$[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]["native"]]]})-1;else if($_key_iter_key_i_native_suboffset$$<=
$payload$$.graph.edges){$_len__len1__ref1__ref2_targets$$=$payload$$.data.objects[$_key_iter_key_i_native_suboffset$$].node;$_j_key$$=$_len__len1__ref1__ref2_targets$$[0];$_len__len1__ref1__ref2_targets$$=2<=$_len__len1__ref1__ref2_targets$$.length?__slice.call($_len__len1__ref1__ref2_targets$$,1):[];$_k__ref$$=0;for($_len2$$=$_len__len1__ref1__ref2_targets$$.length;$_k__ref$$<$_len2$$;$_k__ref$$++)$_i_native_i_target_k$$=$_len__len1__ref1__ref2_targets$$[$_k__ref$$],null==$index$$.edges_by_key[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]&&
($index$$.edges_by_key[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]=[]),$_i_native_i_target_k$$=$graph$$.edges.push({edge:{key:$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$],data:$data$$[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]},"native":$graph$$.natives[$index$$.natives_by_key[$data$$[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]]["native"]]],source:{index:$index$$.nodes_by_key[$_j_key$$],object:$graph$$.nodes[$index$$.nodes_by_key[$_j_key$$]]},
target:{index:$index$$.nodes_by_key[$_i_native_i_target_k$$],object:$graph$$.nodes[$index$$.nodes_by_key[$_i_native_i_target_k$$]]}})-1;$index$$.edges_by_key[$payload$$.data.keys[$_key_iter_key_i_native_suboffset$$]].push($_i_native_i_target_k$$)}return setTimeout(function(){return this.draw($graph$$)},0)};
load_context=this.load_context=function $this$load_context$($event$$,$data$$){var $context_pagedata$$;$context_pagedata$$=this.context=$data$$||JSON.parse(document.getElementById("js-context").textContent);console.log("Loading context...",$context_pagedata$$);this.context.services&&(console.log("Loading services...",$context_pagedata$$.services),apptools.rpc.service.factory($context_pagedata$$.services));this.context.pagedata&&($context_pagedata$$=this.pagedata=JSON.parse(document.getElementById("js-data").textContent),
console.log("Detected stapled pagedata...",$context_pagedata$$),this.receive($context_pagedata$$));return this.context};onloads.push(load_context);_onload=this.onload=function $this$onload$($event$$){var $callback$$,$_i$$,$_len$$,$_ref$$,$_results$$;$_ref$$=this.__onload_callbacks;$_results$$=[];$_i$$=0;for($_len$$=$_ref$$.length;$_i$$<$_len$$;$_i$$++)$callback$$=$_ref$$[$_i$$],$_results$$.push($callback$$($event$$));return $_results$$};
