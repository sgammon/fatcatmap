var busy,catnip,close,collapse,dye,expand,hide,idle,show,toggle,_get;_get=this._get=function(a){if(a&&null!=a.querySelector)return a;if("string"===typeof a)return"#"===a[0]?document.getElementById(a.replace("#","")):document.querySelectorAll(a);console.log("_get was asked to retrieve:",a);throw"invalid _get string";};
catnip=this.catnip={ui:{},data:{},graph:{},context:{},config:{assets:{prefix:"//deliver.fcm-static.org/"}},state:{pending:1},events:{onload:[]},el:{map:_get("#appstage"),stage:_get("#appstage"),frame:_get("#appframe"),logon:_get("#logon"),mapper:_get("#mapper"),spinner:_get("#appspinner"),leftbar:_get("#leftbar"),rightbar:_get("#rightbar"),signon_providers:_get("#signon-providers")}};
show=this.show=this.catnip.ui.show=function(a,d){var b,c,e,g,f;b=_get(a);null==b.length&&(b=[b]);f=[];e=0;for(g=b.length;e<g;e++)c=b[e],c.classList.remove("hidden"),d?f.push(void 0):f.push(c.classList.remove("transparent"));return f};hide=this.hide=this.catnip.ui.hide=function(a){var d,b,c,e;a=_get(a);null==a.length&&(a=[a]);e=[];b=0;for(c=a.length;b<c;b++)d=a[b],e.push(d.classList.add("transparent"));return e};
toggle=this.toggle=this.catnip.ui.toggle=function(a,d){var b,c,e,g,f;b=_get(a);null==b.length&&(b=[b]);f=[];e=0;for(g=b.length;e<g;e++)c=b[e],f.push(c.classList.toggle(d||"transparent"));return f};dye=this.dye=this.catnip.ui.dye=function(a,d){var b,c,e,g,f;b=_get(a);null==b.length&&(b=[b]);f=[];e=0;for(g=b.length;e<g;e++)c=b[e],f.push(c.style.setProperty("background-color",d));return f};busy=this.busy=this.catnip.busy=function(a){return function(){if(0===a.catnip.state.pending++&&a.catnip.el.spinner)return $.catnip.ui.show(a.catnip.el.spinner)}}(this);
idle=this.idle=this.catnip.idle=function(a){return function(){if(0===--a.catnip.state.pending&&a.catnip.el.spinner)return $.catnip.ui.hide(a.catnip.el.spinner)}}(this);
expand=this.expand=this.catnip.ui.expand=function(a,d){var b,c,e,g,f,h,k;null==d&&(d=!1);c=_get(a);null==c.length&&(c=[c]);k=[];f=0;for(h=c.length;f<h;f++)e=c[f],e.classList.contains("open-small")?(g="open-small",d||(b="open-expanded")):e.classList.contains("open-expanded")?(g="open-expanded",d||(b="open-fullscreen")):e.classList.contains("collapsed")&&(g="collapsed",d||(b="open-small")),b=b||d,g&&(e.classList.remove(g),e.classList.remove("transparent")),k.push(e.classList.add(b));return k};
collapse=this.collapse=this.catnip.ui.collapse=function(a,d){var b,c,e,g,f,h,k;null==d&&(d=!1);c=_get(a);null==c.length&&(c=[c]);k=[];f=0;for(h=c.length;f<h;f++)e=c[f],e.classList.contains("open-small")?(g="open-small",d||(b="collapsed")):e.classList.contains("open-expanded")?(g="open-expanded",d||(b="open-small")):e.classList.contains("open-fullscreen")&&(g="open-fullscreen",d||(b="open-expanded")),b=b||d,g&&e.classList.remove(g),k.push(e.classList.add(b));return k};
close=this.close=this.catnip.ui.close=function(a){var d,b,c,e;a=_get(a);null==a.length&&(a=[a]);e=[];b=0;for(c=a.length;b<c;b++)d=a[b],d.classList.remove("open-small"),d.classList.remove("open-expanded"),d.classList.remove("open-fullscreen"),d.classList.add("collapsed"),e.push(d.classList.add("transparent"));return e};"undefined"!==typeof $&&null!==$&&$.extend({catnip:this.catnip});var load_context;
load_context=this.catnip.context.load=function(a){return function(d,b){var c,e,g,f;f=[];g=[];c=a.catnip.context=b||JSON.parse(document.getElementById("js-context").textContent);a.catnip.context.load=load_context;console.log("Loading context...",c);a.catnip.context.agent.capabilities.cookies=navigator.cookieEnabled;a.catnip.context.agent.capabilities.retina=2===window.devicePixelRatio;a.catnip.context.agent.capabilities.worker=window.Worker&&!0||!1;a.catnip.context.agent.capabilities.shared_worker=
window.SharedWorker&&!0||!1;a.catnip.context.agent.capabilities.service_worker=navigator.serviceWorker&&!0||!1;a.catnip.context.agent.capabilities.websocket=window.WebSocket&&!0||!1;a.catnip.context.agent.capabilities.geo=navigator.geolocation&&!0||!1;a.catnip.context.agent.capabilities.touch=0<navigator.maxTouchPoints;a.catnip.context.agent.capabilities.history=window.history.pushState&&!0||!1;a.catnip.context.agent.capabilities.storage={local:null!=window.localStorage,session:null!=window.sessionStorage,
indexed:null!=window.IDBFactory};a.catnip.context.services&&(console.log("Loading services...",c.services),apptools.rpc.service.factory(c.services));a.catnip.context.pagedata&&(c=a.pagedata=JSON.parse(document.getElementById("js-data").textContent),console.log("Detected stapled pagedata...",c),a.catnip.data.receive(c));a.catnip.context.session&&(a.catnip.context.session.established?(a.catnip.session=a.catnip.context.session.payload,console.log("Loading existing session...",a.catnip.session)):(a.catnip.session=
{},console.log("Establishing fresh session...",a.catnip.session),f.push(a.catnip.el.logon)));if(e=a._get("#map"))c=a._get("#catnip"),f.push(e),g.push(c);f.push(a._get("#appfooter"));setTimeout(function(){var b,c,d,e;console.log("Flushing UI reveal queue...",f);e=[];c=0;for(d=f.length;c<d;c++)b=f[c],e.push(a.catnip.ui.show(b));return e},800);setTimeout(function(){var c,b,d;console.log("Flusing mapper reveal queue...",g);b=0;for(d=g.length;b<d;b++)c=g[b],a.catnip.ui.show(c);return a.catnip.idle()},
500);return a.catnip.context}}(this);this.catnip.events.onload.push(load_context);var _onload;_onload=this.onload=function(a){var d,b,c,e,g;e=this.catnip.events.onload;g=[];b=0;for(c=e.length;b<c;b++)d=e[b],g.push(d(a));return g};var graph,index,receive,__slice=[].slice;this.catnip.data.raw={};index=this.catnip.data.index={adjacency:{},nodes_by_key:{},edges_by_key:{},natives_by_key:{},object_natives:{}};graph=this.catnip.data.graph={nodes:[],edges:[],origin:null,natives:[]};
receive=this.catnip.data.receive=function(a){return function(d){var b,c,e,g,f,h,k;d="string"===typeof d?a.catnip.data.payload=JSON.parse(d):a.catnip.data.payload=d;graph.origin=d.graph.origin;g=d.data.keys;c=f=0;for(e=g.length;f<e;c=++f)b=g[c],null==a.catnip.data.raw[b]&&(a.catnip.data.raw[b]=d.data.objects[c]);c=Array(d.graph.natives);b=f=0;for(c=c.length;f<c;b=++f)b=d.graph.edges+1+b,null==index.natives_by_key[d.data.keys[b]]&&(index.natives_by_key[d.data.keys[b]]=graph.natives.push({key:d.data.keys[b],
data:d.data.objects[b]})-1);for(c=-1;c<d.data.keys.length;)if(c++,c<=d.graph.nodes)f=a.catnip.data.index.nodes_by_key[d.data.keys[c]]?index.nodes_by_key[d.data.keys[c]]:index.nodes_by_key[d.data.keys[c]]=graph.nodes.push({node:{key:d.data.keys[c],data:a.catnip.data.raw[d.data.keys[c]]},"native":{key:d.data.objects[c]["native"],data:a.catnip.data.raw[d.data.objects[c]["native"]]}})-1;else if(c<=d.graph.edges)for(index.edges_by_key[d.data.keys[c]]||(index.edges_by_key[d.data.keys[c]]=[]),f=d.data.objects[c].node,
b=f[0],g=2<=f.length?__slice.call(f,1):[],h=0,k=g.length;h<k;h++)e=g[h],a.catnip.data.index.adjacency[b]&&a.catnip.data.index.adjacency[b][e]?f=a.catnip.data.index.adjacency[b][e]:(f=graph.edges.push({edge:{key:d.data.keys[c],data:d.data.objects[c]},"native":a.catnip.data.raw[d.data.objects[c]["native"]],source:index.nodes_by_key[b],target:index.nodes_by_key[e]})-1,index.edges_by_key[d.data.keys[c]].push(f),null==a.catnip.data.index.adjacency[b]&&(a.catnip.data.index.adjacency[b]={}),a.catnip.data.index.adjacency[b][e]=
f);return setTimeout(function(){return a.catnip.graph.draw(graph)},0)}}(this);var _ref;null!=(_ref=$.catnip.el.logon)&&_ref.addEventListener("click",function(a){$.catnip.ui.toggle($.catnip.el.logon,"active");return $.catnip.ui.toggle($.catnip.el.signon_providers)});$(".size-close").on("click",function(a){a=a.target.parentElement.parentElement;console.log("Closing sidebar...",a);return $.catnip.ui.close(a)});
$(".size-expand").on("click",function(a){a=a.target.parentElement.parentElement;console.log("Expanding sidebar...",a);return $.catnip.ui.expand(a)});$(".size-minimize").on("click",function(a){a=a.target.parentElement.parentElement;console.log("Collapsing sidebar...",a);return $.catnip.ui.collapse(a)});
